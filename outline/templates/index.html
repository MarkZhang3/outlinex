{% extends "base.html" %}
{% block content %}

<div class="main">

    {% if request.user.apppassword == '' %} 

        <div class="round-box">
            <h4>Hi {{ request.user.username }}</h4>
            <p>You can get email reminders for events <a href="{% url 'app_password' %}">here</a></p>
        </div>

    {% endif %}

    <h2>All Tables and Events</h2>
    
    {% for table in tables %}
        <table>
            <tr>
                <h4>{{ table }} <a class="delete_table" href="/outline/delete_table/{{ table.id }}">delete table</a></h4>
                <th>Event</th>
                <th>Start date</th>
                <th>End Date</th>
                <th></th>
                <th></th>
            </tr>
            {% for event in table.event_set.all %}
                <tr>
                    <td>{{ event.text }}</td>
                    <td>{{ event.start_date }}</td>
                    <td>{{ event.end_date }}</td>
                    <td><a href="/outline/details/{{ event.id }}">details</a></td>
                    {% if event.completed == False %}
                        <td><a href="/outline/update_completed/{{ event.id }}">mark as done</a></td>
                    {% endif %}
                    <td><a href="/outline/delete_event/{{ event.id }}">delete</td>
                </tr>
            {% endfor %}
        </table>
        <br><br>
    {% endfor %}

</div>

{% endblock content %}