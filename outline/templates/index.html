{% extends "base.html" %}
{% block content %}

<div class="main">
    <br><br>

    {% if request.user.apppassword == '' %} 

        <div class="round_box">
            <h4>Hi {{ request.user.username }}</h4>
            <p>You can get email reminders for events by adding your email app password <a href="{% url 'app_password' %}">here</a></p>
        </div>

    {% endif %}

    <h2>All Tables and Events</h2>
    
    {% for table in tables %}
        <table>
            <tr>
                <th><h4 class="no-margin">{{ table }}</h4></th>
                <th></th>
                <th></th>
                <th></th>
                <th class="event_peripherial"><a class="link1" href="/outline/all_events/{{ table.id }}">all events</a></th>
                <th class="event_peripherial"><a class="link1" href="/outline/delete_table/{{ table.id }}">delete table</a></th>
            </tr>
            <tr>
                <th class="event_main">Event</th>
                <th class="event_main">Start date</th>
                <th class="event_main">End Date</th>
                <th class="event_peripherial"></th>
                <th class="event_peripherial"></th>
                <th class="event_peripherial"></th>
            </tr>
            {% for event in table.event_set.all %}
                {% if event.completed == False %}
                    <tr>
                        <td class="event_main">{{ event.text }}</td>
                        <td class="event_main">{{ event.start_date }}</td>
                        <td class="event_main">{{ event.end_date }}</td>
                        <td class="event_peripherial"><a class="link2" href="/outline/details/{{ event.id }}">details</a></td>
                        <td class="event_peripherial"><a class="link2" href="/outline/update_completed/{{ event.id }}">completed</a></td>
                        <td class="event_peripherial"><a class="link2" href="/outline/delete_event/{{ event.id }}">delete</td>
                    </tr>
                {% endif %}
            {% endfor %}

        </table>
        <br><br>
    {% endfor %}

</div>

{% endblock content %}